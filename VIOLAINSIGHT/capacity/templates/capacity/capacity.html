{% load humanize %}

<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>VIOLA INSIGHTï½œã‚­ãƒ£ãƒ‘ï¼†åå…¥ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</title>
</head>
<body>
    <h1>VIOLA INSIGHTï½œã‚­ãƒ£ãƒ‘ï¼†åå…¥ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</h1>

    <form method="post">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit">è¨ˆç®—ã™ã‚‹</button>
    </form>

    {% if result %}
        <hr>
        <h2>çµæœ</h2>

        {# 1. ãƒ™ãƒ¼ã‚¹æ¡ä»¶ #}
        <h3>1. ãƒ™ãƒ¼ã‚¹æ¡ä»¶</h3>
        <p>å¿…è¦ãƒ™ãƒ¼ã‚¹æ™‚çµ¦ï¼š{{ result.base_hourly_rate|floatformat:0 }} å††/æ™‚</p>
        <p>å®‰å…¨ç¨¼åƒæ™‚é–“ï¼ˆå‰µé€ çš„ã‚ªãƒ•ã‚’å®ˆã‚‹ãƒ©ã‚¤ãƒ³ï¼‰ï¼š{{ result.safe_hours|floatformat:1 }} æ™‚é–“/å¹´</p>

        <h3>2. ãƒ—ãƒ©ãƒ³åˆ¥ æ¨å¥¨å˜ä¾¡</h3>
        <ul>
            <!-- ãƒ—ãƒ©ãƒ³1ï¼šåˆæœŸåˆ†æï¼ˆ2å¹´ã”ã¨ï¼‰ -->
            <li>
                ãƒ—ãƒ©ãƒ³1ï¼ˆåˆæœŸåˆ†æ 2å¹´ã”ã¨ï¼‰ï¼š
                {{ result.plan1_price|intcomma }} å†† / å›
                {% if result.initial_plan %}
                    ï¼ˆãƒ—ãƒ©ãƒ³: {{ result.initial_plan }}ï¼‰
                {% endif %}
            </li>

            <!-- ãƒ—ãƒ©ãƒ³2ï¼šæœˆæ¬¡ä¼´èµ°ï¼ˆsmall / medium / largeï¼‰ -->
            <li>
                ãƒ—ãƒ©ãƒ³2ï¼ˆæœˆæ¬¡ä¼´èµ°ï¼‰ï¼š
                {{ result.plan2_price_annual|intcomma }} å†† / å¹´
                {% if result.monthly_category %}
                    ï¼ˆã‚«ãƒ†ã‚´ãƒª: {{ result.monthly_category }}ï¼‰
                {% endif %}
            </li>

            <!-- ãƒ—ãƒ©ãƒ³3ï¼šæ£šå¸è¨ºæ–­ï¼ˆå˜ç™ºï¼‰ -->
            <li>
                ãƒ—ãƒ©ãƒ³3ï¼ˆæ£šå¸è¨ºæ–­ å˜ç™ºï¼‰ï¼š
                {{ result.plan3_price|intcomma }} å†† / å›
            </li>
        </ul>


        {# 3. å£²ä¸Šè¦æ¨¡åˆ¥ã®æ–™é‡‘ãƒ†ãƒ¼ãƒ–ãƒ« #}
        <h3>3. å£²ä¸Šè¦æ¨¡åˆ¥ã®æ–™é‡‘ãƒ†ãƒ¼ãƒ–ãƒ«</h3>

        <h4>â—† æœˆæ¬¡ä¼´èµ°ãƒ•ã‚£ãƒ¼ã®ç›®å®‰</h4>
        <ul>
            <li>å°è¦æ¨¡åº—ï¼š{{ result.monthly_fee_small|intcomma }} å†† / æœˆ</li>
            <li>ä¸­è¦æ¨¡åº—ï¼š{{ result.monthly_fee_medium|intcomma }} å†† / æœˆ</li>
            <li>å¤§è¦æ¨¡åº—ï¼š{{ result.monthly_fee_large|intcomma }} å†† / æœˆ</li>
        </ul>

        <h4>â—† åˆæœŸåˆ†æãƒ»2å¹´ã”ã¨ã®æ›´æ–°</h4>
        <ul>
            <li>ãƒ©ã‚¤ãƒˆç‰ˆï¼š{{ result.initial_light|intcomma }} å††</li>
            <li>ãƒ•ãƒ«ç‰ˆã€€ï¼š{{ result.initial_full|intcomma }} å††</li>
        </ul>

        {# 4. ç¾åœ¨ã®ãƒ—ãƒ©ãƒ³æ§‹æˆã§ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ #}
        <h3>4. ç¾åœ¨ã®ãƒ—ãƒ©ãƒ³æ§‹æˆã§ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</h3>
        <p>å¹´é–“ç¨¼åƒæ™‚é–“ï¼š{{ result.used_hours|floatformat:1 }} æ™‚é–“</p>
        <p>æ®‹ã‚Šæ™‚é–“ï¼š{{ result.remaining_hours|floatformat:1 }} æ™‚é–“</p>
        <p>æ¨å®šå¹´åï¼š{{ result.estimated_income|intcomma }} å††</p>
        <p>
            ç›®æ¨™ã¨ã®å·®ï¼š
            {% if result.income_diff >= 0 %}
                +{{ result.income_diff|intcomma }} å††ï¼ˆç›®æ¨™ã‚ˆã‚Šä½™è£•ã‚ã‚Šï¼‰
            {% else %}
                {{ result.income_diff|intcomma }} å††ï¼ˆç›®æ¨™ã«å±Šã„ã¦ã„ãªã„ï¼‰
            {% endif %}
        </p>

        <p>
            ç¨¼åƒã‚¾ãƒ¼ãƒ³ï¼š
            {% if result.zone == "safe" %}
                ğŸŸ¢ å®‰å…¨ã‚¾ãƒ¼ãƒ³ï¼ˆåå…¥ã‚‚æ™‚é–“ã‚‚ãƒãƒ©ãƒ³ã‚¹è‰¯ã„ï¼‰
            {% elif result.zone == "warning" %}
                ğŸŸ¡ æ³¨æ„ã‚¾ãƒ¼ãƒ³ï¼ˆã„ã‘ã‚‹ãŒã€ã‚„ã‚„è©°ã‚è¾¼ã¿æ°—å‘³ï¼‰
            {% else %}
                ğŸ”´ å±é™ºã‚¾ãƒ¼ãƒ³ï¼ˆæ™‚é–“ã‚ªãƒ¼ãƒãƒ¼ or ã»ã¼é™ç•Œï¼‰
            {% endif %}
        </p>

        {# 5. ç›®æ¨™å¹´åã«è¿‘ã„ãŠã™ã™ã‚æ§‹æˆ #}
        {% if result.suggestion %}
            <h3>5. ç›®æ¨™å¹´åã«è¿‘ã„ãŠã™ã™ã‚æ§‹æˆï¼ˆã–ã£ãã‚Šï¼‰</h3>
            <p>ãƒ—ãƒ©ãƒ³2ï¼ˆæœˆæ¬¡ä¼´èµ°ï¼‰ï¼š{{ result.suggestion.plan2_clients }} ä»¶</p>
            <p>ãƒ—ãƒ©ãƒ³1ï¼ˆä½“è³ªè¨ºæ–­ï¼‰ï¼š{{ result.suggestion.plan1_cases }} ä»¶/å¹´</p>
            <p>ãƒ—ãƒ©ãƒ³3ï¼ˆæ£šå¸è¨ºæ–­ï¼‰ï¼š{{ result.suggestion.plan3_cases }} ä»¶/å¹´</p>
            <p>â†’ ãã®å ´åˆã®æ¨å®šå¹´åï¼š{{ result.suggestion.income|intcomma }} å††</p>
            <p>â†’ å¹´é–“ç¨¼åƒæ™‚é–“ï¼š{{ result.suggestion.used_hours|floatformat:1 }} æ™‚é–“</p>
            <p>â†’ ç›®æ¨™ã¨ã®å·®ï¼š{{ result.suggestion.diff|intcomma }} å††</p>
        {% endif %}
    {% endif %}
</body>
</html>
